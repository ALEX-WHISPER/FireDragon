{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\FireDragon\\GamePlay\\Game/assets\\scripts\\FireDragon\\GamePlay\\Game\\GameController.js"],"names":["flags","require","cc","Class","extends","Component","editor","executionOrder","properties","_gameModel","default","type","visible","_gameView","_mallController","gamePanelBlock","Node","curVoucherPoint","get","_curVoucherPoint","curTreasure","_curTreasure","curMag","_curMag","magInterval","_magInterval","treasurePerPoint","_treasurePerPoint","isPlaying","onLoad","eventsRegistration","initValuesOnController","onEnable","updateValuesOnModel","updateValuesOnView","onDisable","eventsDeRegistration","NOTIFICATION","on","GAME_HIT_MAIN","onHitMainButton","MAG_ADD","onMagAdded","MAG_MINUS","onMagMinus","ENEMY_CATCH_ATTEMPT","onCatchAttempt","ENEMY_CAUGHT_TREASURE_ADD","onTreasureAdded_CaughtEnemy","ENEMY_ESCAPED_TREASURE_MINUS","onTreasureMinus_LostEnemy","USER_RECHARGE_TREASURE_ADD","onTreasureAdded_Recharge","GAME_2_MALL","onGameToMall","off","onPauseHangingUp","onHitPauseButton","active","voucherPoint","onMallToGame","onStartHangingUp","onHitPlayButton","startHangingUp","pauseHangingUp","event","addingValue","multiNum","console","log","updateTreasureOnController","enemyImg","attackObj","enemyName","result","killMsg","msg","updateScrollViewOnView","onRunningOutofTreasure","minusValue","increment","newTreasure","js","formatStr","setCatchingMinusInfo","check_MagInterval","updateMagOnController","updateMagIntervalOnController","isAdding","setNewMagInterval","setNewMag","setNewTreasure","setNewVoucherPoint","onScrollViewVicItemAdded","updateVoucherPointOnController","tarVoucherPoint","tarTreasure","onResumeEnoughTreasure","tarMagValue","tarMagInterval","updateTreasurePerPointOnController","tarTreasurePerPoint"],"mappings":"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","file":"GameController.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\FireDragon\\GamePlay\\Game","sourcesContent":["var flags = require(\"GameFlags\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    editor: {\r\n        executionOrder: -1\r\n    },\r\n//#region  Properties\r\n    properties: () => ({\r\n        //#region  mvc\r\n        _gameModel: {\r\n            default: null,\r\n            type: require(\"GameModel\"),\r\n            visible: true\r\n        },\r\n\r\n        _gameView: {\r\n            default: null,\r\n            type: require(\"GameView\"),\r\n            visible: true\r\n        },\r\n\r\n        _mallController: {\r\n            default: null,\r\n            type: require(\"MallController\"),\r\n            visible: true\r\n        },\r\n        //#endregion\r\n\r\n        //  Interface nodes\r\n        gamePanelBlock: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        //#region Data reference\r\n        curVoucherPoint: {\r\n            get: function() {return this._curVoucherPoint;},\r\n            visible: false\r\n        },\r\n\r\n        curTreasure: {\r\n            get: function() {return this._curTreasure;},\r\n            visible: false\r\n        },\r\n\r\n        curMag: {\r\n            get: function() {return this._curMag;},\r\n            visible: false\r\n        },\r\n\r\n        magInterval: {\r\n            get: function() {return this._magInterval;},\r\n            visible: false\r\n        },\r\n\r\n        treasurePerPoint: {\r\n            get: function() {return this._treasurePerPoint;},\r\n            visible: false\r\n        },\r\n        //#endregion\r\n\r\n        //  Flags\r\n        isPlaying: {\r\n            default: false,\r\n            visible: false\r\n        },\r\n    }),\r\n    //#endregion\r\n\r\n//#region  life cycle\r\n    onLoad: function() {\r\n        this.eventsRegistration();\r\n        this.initValuesOnController();\r\n    },\r\n\r\n    onEnable: function() {\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n    },\r\n\r\n    onDisable: function() {\r\n        this.eventsDeRegistration();\r\n    },\r\n//#endregion\r\n\r\n//#region  events\r\n    eventsRegistration: function() {\r\n        NOTIFICATION.on(flags.GAME_HIT_MAIN, this.onHitMainButton, this);\r\n        NOTIFICATION.on(flags.MAG_ADD, this.onMagAdded, this);\r\n        NOTIFICATION.on(flags.MAG_MINUS, this.onMagMinus, this);\r\n\r\n        NOTIFICATION.on(flags.ENEMY_CATCH_ATTEMPT, this.onCatchAttempt, this);\r\n        NOTIFICATION.on(flags.ENEMY_CAUGHT_TREASURE_ADD, this.onTreasureAdded_CaughtEnemy, this);\r\n        NOTIFICATION.on(flags.ENEMY_ESCAPED_TREASURE_MINUS, this.onTreasureMinus_LostEnemy, this);\r\n        \r\n        NOTIFICATION.on(flags.USER_RECHARGE_TREASURE_ADD, this.onTreasureAdded_Recharge, this);\r\n\r\n        NOTIFICATION.on(flags.GAME_2_MALL, this.onGameToMall, this);\r\n    },\r\n\r\n    eventsDeRegistration: function() {\r\n        NOTIFICATION.off(flags.GAME_HIT_MAIN, this.onHitMainButton, this);\r\n        NOTIFICATION.off(flags.MAG_ADD, this.onMagAdded, this);\r\n        NOTIFICATION.off(flags.MAG_MINUS, this.onMagMinus, this);\r\n\r\n        NOTIFICATION.off(flags.ENEMY_CATCH_ATTEMPT, this.onCatchAttempt, this);\r\n        NOTIFICATION.off(flags.ENEMY_CAUGHT_TREASURE_ADD, this.onTreasureAdded_CaughtEnemy, this);\r\n        NOTIFICATION.off(flags.ENEMY_ESCAPED_TREASURE_MINUS, this.onTreasureMinus_LostEnemy, this);\r\n\r\n        NOTIFICATION.off(flags.USER_RECHARGE_TREASURE_ADD, this.onTreasureAdded_Recharge, this);\r\n\r\n        NOTIFICATION.off(flags.GAME_2_MALL, this.onGameToMall, this);                \r\n    },\r\n//#endregion\r\n\r\n//#region  interfaces switching\r\n    onGameToMall: function() {\r\n        if (this.isPlaying === true) {\r\n            this.isPlaying = false;\r\n            this.onPauseHangingUp();\r\n            this._gameView.onHitPauseButton();\r\n        }\r\n        this.gamePanelBlock.active = false;\r\n        this._mallController.onGameToMall({voucherPoint: this.curVoucherPoint});\r\n    },\r\n\r\n    onMallToGame: function() {\r\n        this.gamePanelBlock.active = true;\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n    },\r\n//#endregion\r\n\r\n//#region  game play, game pause\r\n    onHitMainButton: function() {\r\n        if (this.isPlaying === false) {\r\n            this.isPlaying = !this.isPlaying;\r\n            this.onStartHangingUp();\r\n            this._gameView.onHitPlayButton();\r\n        } else {\r\n            this.isPlaying = !this.isPlaying;\r\n            this.onPauseHangingUp();\r\n            this._gameView.onHitPauseButton();\r\n        }\r\n    },\r\n\r\n    onStartHangingUp: function() {\r\n        this._gameModel.startHangingUp();\r\n    },\r\n\r\n    onPauseHangingUp: function() {\r\n        this._gameModel.pauseHangingUp();\r\n    },\r\n//#endregion\r\n\r\n//#region onEnemy: attempt, caught, escaped\r\n    onTreasureAdded_CaughtEnemy: function(event) {\r\n        let addingValue = event.multiNum * this.curMag;\r\n        console.log(\"Treasure += \" + addingValue);\r\n\r\n        this.updateTreasureOnController(this.curTreasure + addingValue);\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n        \r\n        let enemyImg = event.enemyImg;\r\n        let attackObj = event.enemyName;\r\n        let result = event.killMsg + addingValue;\r\n        let msg = {enemyImg:enemyImg, attackObj: attackObj, result: result}\r\n        this.updateScrollViewOnView(msg);\r\n    },\r\n\r\n    onTreasureMinus_LostEnemy: function() {\r\n        //  if current treasure is less than or equal to 0, force to stop the game\r\n        if (this.curTreasure <= 0 || this.curTreasure - this.curMag < 0) {\r\n            this._gameModel.pauseHangingUp();\r\n            this._gameView.onRunningOutofTreasure();\r\n            console.log(\"Run out of all your treasure, need to recharge!\");\r\n            return;\r\n        }\r\n\r\n        let minusValue = this.curMag;\r\n        console.log(\"Treasure -= \" + minusValue);\r\n        \r\n        this.updateTreasureOnController(this.curTreasure - minusValue);\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n    },\r\n\r\n    onTreasureAdded_Recharge: function(event) {\r\n        // console.log(cc.js.formatStr(\"increment: %s, unit: %s, totalCount: %s\", event.increment, event.unit, event.increment*event.unit));\r\n        let increment = event.increment;\r\n        let newTreasure = this.curTreasure + increment;\r\n        \r\n        this.updateTreasureOnController(newTreasure);\r\n        console.log(cc.js.formatStr(\"GameController.curTreasure: %s\", this.curTreasure));\r\n    },\r\n\r\n    //  attampt to catch enemy, deduct the treasure after all\r\n    onCatchAttempt: function() {\r\n        this._gameView.setCatchingMinusInfo(this.curMag);\r\n    },\r\n//#endregion\r\n\r\n//#region operate magnification value\r\n    onMagAdded: function() {\r\n        console.log(\"onMagAdded, interval: \" + this.magInterval);\r\n        this.check_MagInterval();\r\n\r\n        if (this.curMag === 1000) {\r\n            this.updateMagOnController(1);\r\n            this.updateMagIntervalOnController(1);\r\n        } else {\r\n            this.updateMagOnController(this.curMag + this.magInterval);\r\n        }\r\n\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n    },\r\n\r\n    onMagMinus: function() {\r\n        console.log(\"onMagMinus, interval: \" + this.magInterval);\r\n        this.check_MagInterval();\r\n        \r\n        if (this.curMag === 1) {\r\n            this.updateMagIntervalOnController(0);\r\n        } else if (this.curMag === 100) {\r\n            this.updateMagIntervalOnController(10);\r\n        }\r\n\r\n        this.updateMagOnController(this.curMag - this.magInterval);\r\n        if (this.curMag === 0) {\r\n            this.updateMagOnController(1);\r\n        }\r\n\r\n        this.updateValuesOnModel();\r\n        this.updateValuesOnView();\r\n    },\r\n\r\n    check_MagInterval: function(isAdding) {\r\n        if (this.curMag >= 1  && this.curMag < 10) {\r\n            this.updateMagIntervalOnController(1);\r\n        } else if (this.curMag >= 10 && this.curMag < 100) {\r\n            this.updateMagIntervalOnController(10);            \r\n        } else if (this.curMag >= 100 && this.curMag < 1000) {\r\n            this.updateMagIntervalOnController(100);            \r\n        }\r\n    },\r\n//#endregion\r\n\r\n//#region  update values on model and view\r\n    updateValuesOnModel: function() {\r\n        this._gameModel.setNewMagInterval(this.magInterval);\r\n        this._gameModel.setNewMag(this.curMag);\r\n        this._gameModel.setNewTreasure(this.curTreasure);\r\n        this._gameModel.setNewVoucherPoint(this.curVoucherPoint);\r\n    },\r\n\r\n    updateValuesOnView: function() {\r\n        this._gameView.setNewMag(this.curMag);\r\n        this._gameView.setNewTreasure(this.curTreasure);\r\n    },\r\n\r\n    updateScrollViewOnView: function(msg) {\r\n        this._gameView.onScrollViewVicItemAdded(msg);\r\n    },\r\n    \r\n    updateVoucherPointOnController: function(tarVoucherPoint) {this._curVoucherPoint = tarVoucherPoint;},\r\n    updateTreasureOnController: function(tarTreasure) {\r\n        if (tarTreasure > 0 && tarTreasure - this.curMag >= 0) {\r\n            this._gameView.onResumeEnoughTreasure();\r\n        }\r\n        this._curTreasure = tarTreasure;\r\n    },\r\n    updateMagOnController: function(tarMagValue) {this._curMag = tarMagValue;},\r\n    updateMagIntervalOnController: function(tarMagInterval) {this._magInterval = tarMagInterval;},\r\n    updateTreasurePerPointOnController: function(tarTreasurePerPoint) {this._treasurePerPoint = tarTreasurePerPoint;},\r\n//#endregion\r\n\r\n//#region  others\r\n    initValuesOnController: function() {\r\n        this.updateVoucherPointOnController(this._gameModel.curVoucherPoint);\r\n        this.updateTreasureOnController(this._gameModel.curTreasure);\r\n        this.updateMagOnController(this._gameModel.curMag);\r\n        this.updateMagIntervalOnController(this._gameModel.magInterval);\r\n        this.updateTreasurePerPointOnController(this._gameModel.treasurePerPoint);\r\n    },\r\n//#endregion\r\n});\r\n"]}