{"version":3,"sources":["Notification.js"],"names":["window","NOTIFICATION","eventList","on","type","callback","target","cc","error","push","once","emit","data","list","i","length","event","call","off","splice","offByType","shift","undefined","offByTarget","key","log","module","exports"],"mappings":"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","file":"Notification.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\PerpleMonster","sourcesContent":["\r\nwindow.NOTIFICATION = (function () {\r\n    var eventList = {};\r\n    \r\n    function on(type, callback, target) {\r\n        if (typeof type !== \"string\" || typeof callback !== \"function\" || typeof target === \"undefined\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'on' param error!\");\r\n            return;\r\n        }\r\n        if (typeof eventList[type] === \"undefined\") {\r\n            eventList[type] = [];\r\n        }\r\n        eventList[type].push({callback: callback, target: target});\r\n    }\r\n\r\n    function once(type, callback, target) {\r\n        if (typeof type !== \"string\" || typeof callback !== \"function\" || typeof target === \"undefined\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'on' param error!\");\r\n            return;\r\n        }\r\n        if (typeof eventList[type] === \"undefined\") {\r\n            eventList[type] = [];\r\n        }\r\n        eventList[type].push({callback: callback, target: target, once: true});\r\n    }\r\n\r\n    function emit(type, data) {\r\n        if (typeof type !== \"string\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'emit' param error!\");\r\n            return;\r\n        }\r\n        var list = eventList[type];\r\n        if (typeof list !== \"undefined\") {\r\n            for (var i = 0; i < list.length; i++) {\r\n                var event = list[i];\r\n                if (event) {\r\n                    event.callback.call(event.target, data);\r\n                    if(event.once){\r\n                        off(type, event.callback, event.target);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function off(type, callback, target) {\r\n        if (typeof type !== \"string\" || typeof callback !== \"function\" || typeof target === \"undefined\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'off' param error!\");\r\n            return;\r\n        }\r\n        var list = eventList[type];\r\n        if (typeof list !== \"undefined\") {\r\n            for (var i = 0; i < list.length; i++) {\r\n                var event = list[i];\r\n                if (event && event.callback === callback && event.target === target) {\r\n                    list.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function offByType(type) {\r\n        if (typeof type !== \"string\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'offByType' param error!\");\r\n            return;\r\n        }\r\n        while (eventList[type].length > 1) {\r\n            eventList[type].shift();\r\n        }\r\n        eventList[type] = undefined;\r\n    }\r\n\r\n    function offByTarget(target){\r\n        if (typeof target === \"undefined\") {\r\n            cc.error(\"GLOBAL_DEF.js: NOTIFICATION method 'offByTarget' param error!\");\r\n            return;\r\n        }\r\n        for(var key in eventList){\r\n            for(var i = 0; i < eventList[key].length ; i++){\r\n                if(eventList[key][i].target === target){\r\n                    eventList[key].splice(i, 1);\r\n                    cc.log('off ' + key);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {on: on, once: once, emit: emit, off: off, offByType: offByType, offByTarget: offByTarget};\r\n})();\r\n\r\nmodule.exports = NOTIFICATION;"]}