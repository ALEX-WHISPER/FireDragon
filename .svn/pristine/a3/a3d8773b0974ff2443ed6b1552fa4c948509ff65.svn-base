{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\UIView.js"],"names":["cc","Class","extends","Component","properties","startPanel","default","type","Node","playingPanel","gameOverPanel","pausedPanel","scoreLable","Label","timeBar","ProgressBar","onLoad","active","onEnable","uiEventsRegisration","onDisable","uiEventsDeRegistration","NOTIFICATION","on","GAME_START","onGameStart","GAME_OVER","onGameOver","GAME_PAUSED","onGamePaused","GAME_RESTART","onGameRestart","GAME_RESUME","onGameResume","SCORE_CHANGED","onScoreChanged","STAR_DISAPPEARING","onTimeFlowing","PROGRESSBAR_FOLLOWSTAR","onProgressBarFollowStar","off","event","find","getComponent","string","score","console","log","msg","progress","node","offset","p","newPos","pos","add","setPosition"],"mappings":"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","file":"UIView.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        startPanel: {\r\n            default:null,\r\n            type: cc.Node\r\n        },\r\n\r\n        playingPanel: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        gameOverPanel: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        pausedPanel: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        scoreLable: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        timeBar: {\r\n            default: null,\r\n            type: cc.ProgressBar\r\n        },\r\n    },\r\n\r\n    onLoad: function() {\r\n        this.startPanel.active = true;\r\n    },\r\n\r\n    onEnable: function() {\r\n        this.uiEventsRegisration();\r\n    },\r\n\r\n    onDisable: function() {\r\n        this.uiEventsDeRegistration();\r\n    },\r\n\r\n    uiEventsRegisration: function() {\r\n        NOTIFICATION.on(GAME_START, this.onGameStart, this);\r\n        NOTIFICATION.on(GAME_OVER, this.onGameOver, this);\r\n        NOTIFICATION.on(GAME_PAUSED, this.onGamePaused, this);\r\n        NOTIFICATION.on(GAME_RESTART, this.onGameRestart, this);\r\n        NOTIFICATION.on(GAME_RESUME, this.onGameResume, this);\r\n        \r\n        NOTIFICATION.on(SCORE_CHANGED, this.onScoreChanged, this);\r\n        NOTIFICATION.on(STAR_DISAPPEARING, this.onTimeFlowing, this);\r\n        NOTIFICATION.on(PROGRESSBAR_FOLLOWSTAR, this.onProgressBarFollowStar, this);\r\n    },\r\n\r\n    uiEventsDeRegistration: function() {\r\n        NOTIFICATION.off(GAME_START, this.onGameStart, this);\r\n        NOTIFICATION.off(GAME_OVER, this.onGameOver, this);\r\n        NOTIFICATION.off(GAME_PAUSED, this.onGamePaused, this);\r\n        NOTIFICATION.off(GAME_RESUME, this.onGameResume, this);                \r\n        NOTIFICATION.off(GAME_RESTART, this.onGameRestart, this);\r\n           \r\n        NOTIFICATION.off(SCORE_CHANGED, this.onScoreChanged, this);\r\n        NOTIFICATION.off(STAR_DISAPPEARING, this.onTimeFlowing, this);\r\n        NOTIFICATION.off(PROGRESSBAR_FOLLOWSTAR, this.onProgressBarFollowStar, this);        \r\n    },\r\n\r\n    onGameStart: function() {\r\n        if (this.startPanel.active === true) {\r\n            this.startPanel.active = false;\r\n        }\r\n\r\n        if (this.playingPanel.active === false) {\r\n            this.playingPanel.active = true;\r\n        }\r\n    },\r\n\r\n    onGameOver: function(event) {\r\n        if (this.gameOverPanel.active === false) {\r\n            this.gameOverPanel.active = true;\r\n        }\r\n        cc.find(\"mainWindow/score\", this.gameOverPanel).getComponent(cc.Label).string = 'Score: ' + event.score;\r\n    },\r\n\r\n    onGamePaused: function() {\r\n        console.log(\"onGamePaused from UIView.js\");\r\n        if (this.pausedPanel.active === false) {\r\n            this.pausedPanel.active = true;\r\n        }\r\n    },\r\n\r\n    onGameResume: function() {\r\n        if (this.pausedPanel.active === true) {\r\n            this.pausedPanel.active = false;\r\n        }\r\n    },\r\n\r\n    onGameRestart: function() {\r\n        if (this.startPanel.active === true) {\r\n            this.startPanel.active = false;\r\n        }\r\n\r\n        if (this.pausedPanel.active === true) {\r\n            this.pausedPanel.active = false;\r\n        }\r\n\r\n        if (this.gameOverPanel.active === true) {\r\n            this.gameOverPanel.active = false;\r\n        }\r\n    },\r\n\r\n    //  update display string of this.scoreLable\r\n    onScoreChanged: function(event) {\r\n        this.scoreLable.string = 'Score: ' + event.msg;\r\n    },\r\n\r\n    //  update progress value of in this.timeBar\r\n    onTimeFlowing: function(event) {\r\n        this.timeBar.progress = event.msg;\r\n    },\r\n\r\n    //  update position of this.timeBar, make it follow the current star\r\n    onProgressBarFollowStar: function(event) {\r\n        if(this.timeBar.node.active === false) {\r\n            this.timeBar.node.active = true;\r\n        }\r\n        var offset = cc.p(0, 50);\r\n        var newPos = event.pos.add(offset);\r\n        this.timeBar.node.setPosition(newPos);\r\n    },\r\n});\r\n"]}