{"version":3,"sources":["util.js"],"names":["md5","require","base64","GetQueryString","name","reg","RegExp","r","window","location","search","substr","match","unescape","err","console","error","random","min","max","Math","round","int","v","floor","c","Array","jiang","jiao","pushJiao","card","i","length","push","PwdMD5","str","hex_md5","base64encode","toLowerCase","xlrHttp","url","call","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","open","send","Http","callback","target","cc","loader","load","tex","log","newframe","SpriteFrame","RV","setRotation","convertVector2","v2","nv","y","x","preTick","checkClickRate","cur","Date","getTime","gBtnOn","setBtnOn","b","bBtnOn","uIconMap","addIconCache","uid","node","iconUrl","spriteFrame","it","parent","sp","getComponent","Sprite","active","removeFromIconCache","company","numConversion","num","pow","toFixed","lengthUTF8","len","bytes","getDeviceInfo","sys","platform","ANDROID","jsb","reflection","callStaticMethod","os","OS_IOS","isNative","ret","UNKNOWN","IOS","getPlatFrom","module","exports"],"mappings":"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","file":"util.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\FireDragon\\net","sourcesContent":["\r\nvar md5 = require('MD5')\r\nvar base64 = require('base64')\r\n\r\nfunction GetQueryString(name)\r\n{\r\n    try {\r\n        var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if(r!=null)\r\n            return  unescape(r[2]); \r\n        return null;\r\n    } catch (err) {\r\n        console.error(\"--------GetQueryString error:\" + err);\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction random(min, max) {\r\n    return Math.round(Math.random() * (max - min)) + min\r\n}\r\nfunction int(v) {\r\n    return Math.floor(v)\r\n}\r\n\r\nvar c = new Array(30)\r\nvar jiang = 0\r\nvar jiao = null\r\nfunction pushJiao(card) {\r\n    card += 10\r\n    for (var i = 0; i < jiao.length; i++) {\r\n        if (jiao[i] == card) {\r\n            return\r\n        }\r\n    }\r\n    jiao.push(card)\r\n}\r\n \r\n\r\n\r\nfunction PwdMD5(str)\r\n{\r\n    return md5.hex_md5(base64.base64encode(md5.hex_md5(str.toLowerCase())))\r\n} \r\n\r\nfunction xlrHttp(url, call)\r\n{\r\n     var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n            var response = xhr.responseText;\r\n            call(response);\r\n            xhr = null;\r\n        }\r\n    };\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.send();\r\n}\r\n\r\nfunction Http(url, callback, target)\r\n{\r\n    //loadRemoteImg(url, callback, target);\r\n    cc.loader.load(url, function (err, tex) {\r\n        if(err)\r\n        {\r\n            console.log(\"------ \" + err);\r\n            return ;\r\n        }    \r\n\r\n        var newframe = new cc.SpriteFrame(tex);\r\n        callback(target,newframe);\r\n    });  \r\n}\r\n\r\n/*\r\n*   rotation = 90/180 /270\r\n*/\r\n\r\nvar RV = 0;\r\nfunction setRotation(r)\r\n{\r\n    RV = r;\r\n}\r\n\r\nfunction convertVector2(v2)\r\n{\r\n    switch(RV)\r\n    {\r\n        case 90:\r\n            var nv = cc.v2(-v2.y, -v2.x);\r\n            return nv;\r\n        case 180:\r\n            var nv = cc.v2(-v2.x, v2.y);\r\n            return nv;\r\n        case 270:\r\n            var nv = cc.v2(v2.y, v2.x);\r\n            return nv;\r\n        default:\r\n            return v2;\r\n    }\r\n}\r\n\r\nvar preTick = 0\r\nfunction checkClickRate()\r\n{\r\n     var cur  = new Date().getTime()\r\n    if( cur - preTick < 250)\r\n    {\r\n        //提示操作过于频繁？\r\n        return true\r\n    }\r\n\r\n    preTick = cur\r\n    return false\r\n}\r\n\r\nvar gBtnOn = false\r\nfunction setBtnOn(b)\r\n{\r\n    gBtnOn = b\r\n}\r\n\r\nfunction bBtnOn()\r\n{\r\n    return gBtnOn\r\n}\r\n\r\n\r\nvar uIconMap = {}\r\n//保存 icon spriteFrame ,当已经有保存，并spriteframe 已经存在，则直接设置icon spriteFrame                       \r\nfunction addIconCache(uid,node, iconUrl, spriteFrame)\r\n{   \r\n    if(uid == null)\r\n        return false\r\n\r\n    var it = uIconMap[uid]\r\n    if(it == null)\r\n    {\r\n        it = {}\r\n        it.node = node\r\n        it.iconUrl = iconUrl\r\n        it.spriteFrame = spriteFrame\r\n        uIconMap[uid] = it\r\n    }    \r\n    else\r\n    {\r\n        if(node)\r\n        {\r\n            console.log(\"user \" + uid + \" node name \" + node.parent.name)\r\n            it.node = node\r\n        }\r\n\r\n        if(iconUrl)\r\n            it.url = iconUrl\r\n\r\n        //传进了spriteFrame 即加载好了icon\r\n        if(it.spriteFrame != null)\r\n        {   \r\n            console.log(\"user \" + uid + \" set icon to \"  + node.parent.name)\r\n            if(node)\r\n            {\r\n                var sp = it.node.getComponent(cc.Sprite)\r\n                sp.spriteFrame = it.spriteFrame\r\n                it.node.active = true\r\n            }\r\n\r\n            return true\r\n        }\r\n\r\n        if(spriteFrame)\r\n        {\r\n            console.log(\"set new spriteFrame --> user \" + uid )\r\n            it.spriteFrame = null\r\n            it.spriteFrame = spriteFrame\r\n        }\r\n    }\r\n\r\n\r\n    return false\r\n} \r\n\r\nfunction removeFromIconCache(uid)\r\n{\r\n    var it = uIconMap[uid]\r\n    if(it)\r\n    {\r\n        it.node = null\r\n        it.url = null\r\n    }\r\n\r\n    uIconMap[uid] = null\r\n}\r\n\r\nconst company=['','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];\r\n\r\nfunction numConversion(num)\r\n{  \r\n    let str=''; \r\n    for(let i=300;i>0;i--){\r\n        if(num>=Math.pow(10,3*i)){ \r\n           if(i>26){ \r\n            //    console.log(Math.ceil(i/26),i%26,i)\r\n               str=(num/Math.pow(10,3*i)).toFixed(1); \r\n               str +=company[Math.floor(i/26)];\r\n               str +=company[i%26+1];\r\n           }else{\r\n               str=(num/Math.pow(10,3*i)).toFixed(1);\r\n               str +=company[i];\r\n           }\r\n           return str;\r\n        }\r\n    } \r\n     return Math.round(num)+'';\r\n} \r\n\r\n// function uint8arrayToStringMethod(myUint8Arr) {\r\n//    return String.fromCharCode.apply(null, myUint8Arr);\r\n// }\r\n\r\n\r\n// function Utf8ArrayToStr(array) {\r\n//     var out, i, len, c;\r\n//     var char2, char3;\r\n\r\n//     out = \"\";\r\n//     len = array.length;\r\n//     i = 0;\r\n//     while(i < len) {\r\n//     c = array[i++];\r\n//     switch(c >> 4)\r\n//     { \r\n//       case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\r\n//         // 0xxxxxxx\r\n//         out += String.fromCharCode(c);\r\n//         break;\r\n//       case 12: case 13:\r\n//         // 110x xxxx   10xx xxxx\r\n//         char2 = array[i++];\r\n//         out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\r\n//         break;\r\n//       case 14:\r\n//         // 1110 xxxx  10xx xxxx  10xx xxxx\r\n//         char2 = array[i++];\r\n//         char3 = array[i++];\r\n//         out += String.fromCharCode(((c & 0x0F) << 12) |\r\n//                        ((char2 & 0x3F) << 6) |\r\n//                        ((char3 & 0x3F) << 0));\r\n//         break;\r\n//     }\r\n//     }\r\n\r\n//     return out;\r\n// }\r\n\r\n// /*\r\n//  * Interfaces:\r\n//  * utf8 = utf16to8(utf16);\r\n//  * utf16 = utf16to8(utf8);\r\n//  */\r\n\r\n// function utf16to8(str) {\r\n//     var out, i, len, c;\r\n\r\n//     out = \"\";\r\n//     len = str.length;\r\n//     for(i = 0; i < len; i++) {\r\n// \tc = str.charCodeAt(i);\r\n// \tif ((c >= 0x0001) && (c <= 0x007F)) {\r\n// \t    out += str.charAt(i);\r\n// \t} else if (c > 0x07FF) {\r\n// \t    out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\r\n// \t    out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));\r\n// \t    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\r\n// \t} else {\r\n// \t    out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));\r\n// \t    out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));\r\n// \t}\r\n//     }\r\n//     return out;\r\n// }\r\n\r\n// function utf8to16(str) {\r\n//     var out, i, len, c;\r\n//     var char2, char3;\r\n\r\n//     out = \"\";\r\n//     len = str.length;\r\n//     i = 0;\r\n//     while(i < len) {\r\n// \tc = str.charCodeAt(i++);\r\n// \tswitch(c >> 4)\r\n// \t{ \r\n// \t  case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\r\n// \t    // 0xxxxxxx\r\n// \t    out += str.charAt(i-1);\r\n// \t    break;\r\n// \t  case 12: case 13:\r\n// \t    // 110x xxxx   10xx xxxx\r\n// \t    char2 = str.charCodeAt(i++);\r\n// \t    out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\r\n// \t    break;\r\n// \t  case 14:\r\n// \t    // 1110 xxxx  10xx xxxx  10xx xxxx\r\n// \t    char2 = str.charCodeAt(i++);\r\n// \t    char3 = str.charCodeAt(i++);\r\n// \t    out += String.fromCharCode(((c & 0x0F) << 12) |\r\n// \t\t\t\t\t   ((char2 & 0x3F) << 6) |\r\n// \t\t\t\t\t   ((char3 & 0x3F) << 0));\r\n// \t    break;\r\n// \t}\r\n//     }\r\n\r\n//     return out;\r\n// }\r\n\r\n// function str2UTF8(str){  \r\n//     var bytes = new Array();   \r\n//     var len,c;  \r\n//     len = str.length;  \r\n//     for(var i = 0; i < len; i++){  \r\n//         c = str.charCodeAt(i);  \r\n//         if(c >= 0x010000 && c <= 0x10FFFF){  \r\n//             bytes.push(((c >> 18) & 0x07) | 0xF0);  \r\n//             bytes.push(((c >> 12) & 0x3F) | 0x80);  \r\n//             bytes.push(((c >> 6) & 0x3F) | 0x80);  \r\n//             bytes.push((c & 0x3F) | 0x80);  \r\n//         }else if(c >= 0x000800 && c <= 0x00FFFF){  \r\n//             bytes.push(((c >> 12) & 0x0F) | 0xE0);  \r\n//             bytes.push(((c >> 6) & 0x3F) | 0x80);  \r\n//             bytes.push((c & 0x3F) | 0x80);  \r\n//         }else if(c >= 0x000080 && c <= 0x0007FF){  \r\n//             bytes.push(((c >> 6) & 0x1F) | 0xC0);  \r\n//             bytes.push((c & 0x3F) | 0x80);  \r\n//         }else{  \r\n//             bytes.push(c & 0xFF);  \r\n//         }  \r\n//     }  \r\n//     return bytes;  \r\n// } \r\n\r\nfunction lengthUTF8(len){\r\n    var bytes = new Array();   \r\n    for(var i = 0; i < len; i++){ \r\n          bytes.push(0xFF);  \r\n    }\r\n    return bytes;  \r\n}\r\n\r\nfunction getDeviceInfo(){\r\n     //获取设备信息   \r\n     if(cc.sys.platform == cc.sys.ANDROID){\r\n         return jsb.reflection.callStaticMethod(\"org/cocos2dx/lib/Cocos2dxActivity\", \"GetIMEI\", \"()Ljava/lang/String;\"); \r\n     }else{\r\n           if(cc.sys.os  == cc.sys.OS_IOS && cc.sys.isNative){\r\n            //  return \"{$BRAND$:$Apple$, $DEVICE$:$Unknown$}\" \r\n                let ret = jsb.reflection.callStaticMethod(\"RootViewController\",\"DeviceInfo\");\r\n                if(ret)\r\n                   return ret;\r\n           }else{\r\n                return \"{$BRAND$:$Microsoft$, $DEVICE$:$Windows$}\" \r\n           } \r\n     } \r\n} \r\n\r\nconst UNKNOWN=1; \r\nconst IOS=2;\r\nconst ANDROID=3;\r\nfunction getPlatFrom(){\r\n     return cc.sys.platform;\r\n    //  console.log('当前设备平台',cc.sys.platform);\r\n    //  if(cc.sys.platform == cc.sys.ANDROID)\r\n    //     return ANDROID\r\n    //  else if(cc.sys.platform == cc.sys.IPHONE || cc.sys.platform == cc.sys.IPAD)\r\n    //     return IOS\r\n    //  return UNKNOWN;\r\n}\r\n\r\nmodule.exports = {\r\n    random: random, \r\n    PwdMD5:PwdMD5,\r\n    GetQueryString:GetQueryString,\r\n    Http:Http,\r\n    xlrHttp:xlrHttp,\r\n    setRotation:setRotation,\r\n    convertVector2:convertVector2,\r\n    checkClickRate:checkClickRate,\r\n    setBtnOn:setBtnOn,\r\n    bBtnOn:bBtnOn,\r\n    addIconCache:addIconCache,\r\n    removeFromIconCache:removeFromIconCache,\r\n    numConversion:numConversion,\r\n    // uint8arrayToStringMethod:uint8arrayToStringMethod,\r\n    // Utf8ArrayToStr:Utf8ArrayToStr,\r\n    // utf16to8:utf16to8,\r\n    // utf8to16:utf8to16,\r\n    // str2UTF8:str2UTF8,\r\n    getDeviceInfo:getDeviceInfo, \r\n    getPlatFrom:getPlatFrom\r\n}"]}