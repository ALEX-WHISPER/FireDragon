{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\FireDragon\\net/assets\\scripts\\FireDragon\\net\\response.js"],"names":["net","require","config","SUCCESS","OnAuthCodeConfirmRst","rsp","result","OnFastRegisterResponse","Instance","account","name","pwd","password","cc","sys","isNative","director","getScene","getChildByName","getComponent","saveNewData","console","log","openTips","OnGatewayHeartbeat","waitGatewayHeartbeatNum","OnQueryArenaResponse","arena_info","id","ArenaId","EnterArenaReq","Version","OnUserEnterMCRsp","HallEnterRoomReq","OnHallSitInGSRsp","ret_code","HallGsReadyReq","error","OnUserEnterTableRsp","OnRefreshUserMoneyRsp","OnSyncSomeOneAdditional","Data","Id","globalCfg","respDataId","poker","data","replace","obj","JSON","parse","key","UserManager","User","beiIndex","Number","addPoker","pokerList","OnSyncInitAdditional","synInitPlayer","OnSyncInitMoney","setMoney","Money","oldMoney","currentMoney","OnResponseGameServerTime","OnResponseAdditional","OnHeartbeat","OnUserLogoutRsp","OnS2CSendMessage","showTime","Math","min","showType","message","loginOk","removeAll","loginOut","url","js","formatStr","tAntiAddictionAddressInfo","certification","openURL","OnRefreshUserDianJuanRsp","setVolume","money","OnNotifyWebChargeSuccess","payId","playPayDianjuan","currntGK","bigGuanka","smallGuanka","gem","BuyGemCfg","pow","setGemNum","getGemNum","round","updateGem","dianJuan","audtoDuiHuan","msg","ticketExchangeGoldReq","value","ChargeValue"],"mappings":"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","file":"response.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\FireDragon\\net","sourcesContent":["var net = require(\"net\")\r\nvar config = require('config');\r\n// var UserManager = require('UserManager');    //  EASON COMMENT\r\n// const EventManager=require('EventManager');  //  EASON COMMENT\r\n// const globalCfg=require('GlobalConfig');     //  EASON COMMENT\r\n\r\nvar SUCCESS = 1;\r\n\r\n//#region  EASON COMMENT\r\n/*\r\nnet.OnThreeWayLoginResponse = function(rsp){ \r\n    if(rsp.result == SUCCESS)\r\n    { \r\n         net.loginOk = true   \r\n         config.Instance.save();   \r\n         UserManager.User.id = rsp.info.user_dbid;\r\n         UserManager.User.money = Number(rsp.info.Score.money);\r\n         UserManager.User.oldMoney =UserManager.User.money;\r\n         UserManager.User.currentMoney=UserManager.User.money;\r\n         UserManager.User.sex = rsp.info.sex;\r\n         UserManager.User.nick = rsp.info.nickname; \r\n         UserManager.User.score = rsp.info.Score;  \r\n         UserManager.User.certification = rsp.info.certification; \r\n        \r\n         //保存本次玩家数据result\r\n         //登录成功查询域;\r\n         net.QueryArenaReq(); \r\n        //  console.error('返回亲朋验证码',rsp.info.authcode); \r\n        //  if(rsp.info.authcode && rsp.info.authcode==32)\r\n              \r\n         if(rsp.info.authcode &&  UserManager.User.sLicensekey!=rsp.info.authcode){\r\n            net.confirmAuthCode(rsp.info.authcode); \r\n         } \r\n         UserManager.User.sLicensekey=rsp.info.authcode;  \r\n         if(cc.sys.isNative)\r\n            cc.director.getScene().getChildByName('Canvas').getChildByName('LoginLayer').getComponent('LoginLayer').saveNewData(); \r\n    }\r\n    else\r\n    {   \r\n          //登录失败弹出提示\r\n          cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1004',rsp.error_message);\r\n          cc.director.getScene().getChildByName('Canvas').getChildByName('LoginLayer').getChildByName('Loading').active=false;\r\n    }\r\n}\r\n*/\r\n//#endregion\r\n\r\nnet.OnAuthCodeConfirmRst=function(rsp){\r\n    //授权返回结果\r\n    if( rsp.result == SUCCESS ){\r\n         \r\n    }else{\r\n        //  cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1004',rsp.message);\r\n    }\r\n}\r\n\r\nnet.OnFastRegisterResponse = function(rsp){ \r\n\tif( rsp.result == SUCCESS ){\r\n        config.Instance.account = rsp.name;\r\n        config.Instance.pwd = rsp.password;\r\n        if(cc.sys.isNative)\r\n           cc.director.getScene().getChildByName('Canvas').getChildByName('LoginLayer').getComponent('LoginLayer').saveNewData(rsp.name,rsp.password);\r\n        // UserManager.Self().set(rsp.user_id, rsp.nickname); \r\n        console.log('kuaisuzhucechenggong ',rsp.name, rsp.password);\r\n        // EventManager.Dispatch('fastRegister',rsp.name, rsp.password);    //  EASON COMMENT\r\n    }else{\r\n\t    // console.log('kuaisuzhuceshibai');\r\n        cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1004','注册失败,请稍后再试！');  \r\n    }\r\n}  \r\n\r\nnet.OnGatewayHeartbeat = function(rsp)\r\n{\r\n    net.waitGatewayHeartbeatNum = 0\r\n}\r\n\r\nnet.OnQueryArenaResponse = function(rsp)\r\n{\r\n    console.log(\"OnQueryArenaResponse\",rsp.arena_info[0].id); \r\n    net.ArenaId= rsp.arena_info[0].id\r\n    var config=require('config')  \r\n    net.EnterArenaReq(net.ArenaId,config.Version);\r\n}\r\n\r\n// 进入arena的返回结果\r\nnet.OnUserEnterMCRsp = function(rsp)\r\n{\r\n    console.log(\"OnUserEnterMCRsp+++++++++++++++++++\"+rsp.result)\r\n    if(rsp.result == SUCCESS)\r\n    {\r\n        // if(net.MJroomID != null && net.MJroomID != \"\")\r\n        // {\r\n        //     net.RoomId = net.MJroomID;\r\n        //     net.MJroomID = \"\";\r\n        // }\r\n\r\n        // net.EnterCustomTableReq(net.RoomId,net.ArenaId)\r\n        net.HallEnterRoomReq();\r\n        //EventManager.Dispatch(EventManager.Type.E_Showroom)\r\n    }\r\n    else\r\n    {\r\n        // UIManager.ShowTip(net.ErrorCode[rsp.result])\r\n    }\r\n}\r\n\r\n//#region  EASON COMMENT\r\n/*\r\nnet.OnHallEnterRoomRsp = function(rsp){\r\n    console.log('daolezheli')\r\n    if(rsp.ret_code == SUCCESS)\r\n    { \r\n        net.RoomId = rsp.room_id \r\n        console.log('进入房间成功')\r\n        net.HallSitInGSReq(UserManager.User.id, rsp.room_id);\r\n    }\r\n    else\r\n    {\r\n         cc.director.getScene().getChildByName('Canvas').getChildByName('LoginLayer').getChildByName('Loading').active=false; \r\n         if(rsp.ret_code==42){\r\n             return;\r\n         }  \r\n         if(rsp.ret_code==49){ \r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006','您已经被纳入防沉迷系统，是否前往填写防沉迷信息？',function(){\r\n                   \r\n               },function(){\r\n                  //填写信息\r\n                   let url=cc.js.formatStr(globalCfg.tAntiAddictionAddressInfo,UserManager.User.id,UserManager.User.certification);\r\n                   cc.sys.openURL(url); \r\n              }); \r\n             return;\r\n         }\r\n         if(net.gameIng && rsp.ret_code==22){\r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('MainLayer').getComponent('Player').resetGame(2);  \r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1003','您的账号在其他地方登录,请重新登录'); \r\n         }else{\r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1003',globalCfg.errorCfg[rsp.ret_code]); \r\n         } \r\n    }\r\n}\r\n*/\r\n//#endregion\r\n\r\nnet.OnHallSitInGSRsp = function(rsp)\r\n{ \r\n    if(rsp.ret_code == SUCCESS)\r\n    { \r\n        console.log('kaishile 11111')\r\n        net.HallGsReadyReq();\r\n    }\r\n    else\r\n    {\r\n        cc.error(\"错误001\") \r\n    }\r\n}\r\n\r\nnet.OnUserEnterTableRsp = function(rsp){\r\n    console.log('+++++++++++++++++++++++++++++++++++++')\r\n    // if(rsp.result == SUCCESS){\r\n    //     console.log('chengggong el ') \r\n    //      net.HallSitInGSReq(UserManager.User.id, rsp.room_id);\r\n    // } \r\n}\r\n\r\n//#region EASON COMMENT\r\n/*\r\nnet.OnSyncMoney = function(rsp)\r\n{\r\n    if(rsp){ \r\n        if(rsp.Type==0 || rsp.Type==1 ||rsp.Type==2){   \r\n            let jieguo= rsp.Money + rsp.Ratio - (UserManager.User.currentMoney+UserManager.User.pokerAward);  \r\n            let type=0;\r\n            if(rsp.HasFiveCard && rsp.Type==2){\r\n                //卡牌奖励处理  \r\n                type=1; \r\n                if(jieguo>0)\r\n                   UserManager.User.pokerAward=jieguo;    \r\n            } \r\n             //击杀怪物同步金币 \r\n            if(UserManager.User.pokerAward>0){\r\n                 UserManager.User.setMoney(UserManager.User.getMoney()-rsp.Ratio);    \r\n            }else{\r\n                 UserManager.User.setMoney(UserManager.User.currentMoney-rsp.Ratio);     \r\n            }\r\n            //特殊处理 如果是金币怪 则同步上个怪结束时金币\r\n            if(UserManager.User.cMonstType==3 && jieguo>0){ \r\n                // console.log('金币怪',UserManager.User.currentMoney,UserManager.User.pokerAward,rsp.Money)\r\n                if(UserManager.User.pokerAward>0){\r\n                    UserManager.User.setMoney(UserManager.User.currentMoney+UserManager.User.pokerAward);  \r\n                    UserManager.User.pokerAward=0;  \r\n                } \r\n            }  \r\n            if(UserManager.User.pokerAward>0){\r\n               UserManager.User.currentMoney=rsp.Money-UserManager.User.pokerAward;\r\n               if(UserManager.User.currentMoney<0)\r\n                  UserManager.User.currentMoney=0;  \r\n            }else{ \r\n                UserManager.User.currentMoney=rsp.Money;   \r\n            } \r\n            if(jieguo<=0)\r\n            {\r\n                jieguo=0;  \r\n                UserManager.User.setMoney(UserManager.User.currentMoney);\r\n            }else{\r\n                UserManager.User.oldMoney=UserManager.User.currentMoney-jieguo;   \r\n            } \r\n            let fz=0;\r\n            if(UserManager.User.cMonstType==3 && jieguo>0)\r\n            {\r\n                //如果是前置怪需要计算分值 同步金币 \r\n                fz=Math.round(jieguo/rsp.Ratio);\r\n            } \r\n            // if(fz>0)\r\n            //    UserManager.User.setMoney(UserManager.User.getMoney()-rsp.Ratio);\r\n            if(rsp.Money<=0){\r\n                UserManager.User.setMoney(0);\r\n                jieguo=0;\r\n                fz=0;\r\n            }   \r\n            // EventManager.Dispatch('synMoney',jieguo,fz,type);    //  EASON COMMENT\r\n            console.log('返回金币'+rsp.Money,jieguo,UserManager.User.getMoney());  \r\n        }else if(rsp.Type==3){ \r\n              //充值金币送钻石处理\r\n            //   let key=Number(rsp.Money)-UserManager.User.currentMoney; \r\n              //播放金币雨效果 \r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('AnimationLayer').getComponent('AnimationLayer').playPayGlod();  \r\n              //充值成功\r\n              UserManager.User.setMoney(rsp.Money);  \r\n              UserManager.User.oldMoney=rsp.Money; \r\n              UserManager.User.currentMoney=rsp.Money; \r\n        } \r\n    } \r\n}\r\n*/\r\n//#endregion\r\n\r\nnet.OnRefreshUserMoneyRsp=function(rsp){\r\n    //  if(rsp){\r\n    //      UserManager.User.setMoney(Number(rsp.Money)); \r\n    //      UserManager.User.oldMoney=Number(rsp.Money); \r\n    //      UserManager.User.currentMoney=Number(rsp.Money); \r\n    //  }\r\n} \r\n\r\nnet.OnSyncSomeOneAdditional=function(rsp){\r\n    //同步卡牌数据\r\n    if(rsp&&rsp.Data){\r\n       if(rsp.Id==globalCfg.respDataId.poker){\r\n           let data=rsp.Data.replace(/&/g,'\"');\r\n           console.log(data);\r\n           let obj=JSON.parse(data); \r\n           for(let key in obj){ \r\n                if(UserManager.User.beiIndex==Number(key)){ \r\n                       cc.director.getScene().getChildByName('Canvas').getChildByName('MainLayer').getComponent('Player').addPoker(obj[key] || {});\r\n                } \r\n                UserManager.User.pokerList[key]=obj[key] || {};\r\n            } \r\n       }\r\n    }\r\n}\r\n\r\nnet.OnSyncInitAdditional=function(rsp)\r\n{\r\n    if(rsp){ \r\n        //同步数据\r\n        UserManager.User.synInitPlayer(rsp.Data); \r\n        // console.log('登录同步额外数据',rsp.Data); \r\n        // EventManager.Dispatch('loginSuccess');   //  EASON COMMENT\r\n    } \r\n}\r\n\r\n\r\nnet.OnSyncInitMoney=function(rsp)\r\n{ \r\n      console.log('登录同步金币'); \r\n      if(rsp){ \r\n           UserManager.User.setMoney(rsp.Money); \r\n           UserManager.User.oldMoney=rsp.Money;\r\n           UserManager.User.currentMoney=rsp.Money;\r\n      }\r\n}\r\n\r\nnet.OnResponseGameServerTime=function(rsp)\r\n{\r\n      console.log('登录同步时间'); \r\n}\r\n\r\nnet.OnResponseAdditional=function(rsp)\r\n{ \r\n    \r\n}\r\n\r\nnet.OnHeartbeat=function(rsp){\r\n\r\n}\r\n\r\nnet.OnUserLogoutRsp=function(rsp){\r\n    console.log('退出成功')\r\n}\r\n\r\nnet.OnS2CSendMessage=function(rsp){\r\n     //------防沉迷\r\n      if(rsp){ \r\n           rsp.showTime=Math.min(5,rsp.showTime || 3);\r\n           if(rsp.showType=='1'){\r\n              //显示确认框 \r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',rsp.message);  \r\n           }else if(rsp.showType=='2'){\r\n              //防沉迷确认框\r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',rsp.message,function(){\r\n                  //跳转到登陆界面 \r\n                   net.loginOk=false;\r\n                   cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').removeAll();\r\n                   cc.director.getScene().getChildByName('Global').getComponent('Function').loginOut(2);\r\n               },function(){\r\n                  //填写信息\r\n                   let url=cc.js.formatStr(globalCfg.tAntiAddictionAddressInfo,UserManager.User.id,UserManager.User.certification);\r\n                   cc.sys.openURL(url);\r\n                    net.loginOk=false;\r\n                    cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').removeAll();\r\n                    cc.director.getScene().getChildByName('Global').getComponent('Function').loginOut(2);\r\n              }); \r\n           }else{\r\n              cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',rsp.message,null,null,rsp.showTime);   \r\n           }\r\n      } \r\n}\r\n\r\nnet.OnRefreshUserDianJuanRsp=function(rsp){\r\n    //同步点券\r\n    if(rsp){  \r\n       UserManager.User.setVolume(Number(rsp.money));  \r\n    } \r\n}\r\n\r\nnet.OnNotifyWebChargeSuccess=function(rsp){\r\n     //充值同步\r\n     if(UserManager.User.payId)\r\n     {  \r\n            cc.director.getScene().getChildByName('Canvas').getChildByName('AnimationLayer').getComponent('AnimationLayer').playPayDianjuan();  \r\n            let currntGK=(UserManager.User.bigGuanka-1)*10+UserManager.User.smallGuanka; \r\n            let gem=globalCfg.BuyGemCfg[UserManager.User.payId];  \r\n            if(currntGK>10){\r\n                    if(UserManager.User.payId=='1001'){ \r\n                        gem+=(1*Math.pow(1+0.1,currntGK-1))*0.1; \r\n                    }else if(UserManager.User.payId=='1002'){\r\n                        gem+=(1*Math.pow(1+0.1,currntGK-1))*0.3;\r\n                    }else if(UserManager.User.payId=='1003'){\r\n                        gem+=(1*Math.pow(1+0.1,currntGK-1))*0.6;\r\n                    }else if(UserManager.User.payId=='1004'){\r\n                        // gem+=(1*Math.pow(1+0.1,currntGK-1))*0.9;\r\n                        gem+=(1*Math.pow(1+0.1,currntGK-1))+(1*Math.pow(1+0.1,currntGK))*0.5;\r\n                    }else if(UserManager.User.payId=='1005'){\r\n                        gem+=1*Math.pow(1+0.1,currntGK-1)*(1-Math.pow(1+0.1,2))/(1-(1+0.1));\r\n                    }else if(UserManager.User.payId=='1006'){\r\n                        gem+=1*Math.pow(1+0.1,currntGK-1)*(1-Math.pow(1+0.1,5))/(1-(1+0.1));\r\n                    }else if(UserManager.User.payId=='1007'){\r\n                        gem+=1*Math.pow(1+0.1,currntGK-1)*(1-Math.pow(1+0.1,15))/(1-(1+0.1));\r\n                    }else if(UserManager.User.payId=='1008'){\r\n                        gem+=1*Math.pow(1+0.1,currntGK-1)*(1-Math.pow(1+0.1,40))/(1-(1+0.1));\r\n                    }    \r\n                }   \r\n            //   let addGem=globalCfg.BuyGemCfg[UserManager.User.payId]; \r\n                UserManager.User.setGemNum(UserManager.User.getGemNum()+Math.round(gem)); \r\n                cc.director.getScene().getChildByName('Canvas').getChildByName('MainLayer').getComponent('Player').updateGem(); \r\n                UserManager.User.payId=null; \r\n            if(Number(rsp.dianJuan)>0 && !UserManager.User.audtoDuiHuan){\r\n                 //弹出提示 时候点劵兑换金币\r\n                 let msg=cc.js.formatStr(\"恭喜您获得%d点券，是否立即兑换为%d金币\",Number(rsp.dianJuan),Number(rsp.dianJuan)*2000);\r\n                 cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',msg,function(){\r\n                    \r\n                 },function(){\r\n                     net.ticketExchangeGoldReq(UserManager.User.id,Number(rsp.dianJuan),function(data){ \r\n                            if(data){ \r\n                                let result=JSON.parse(data);\r\n                                if(result.result.value==0){\r\n                                     let msg=\"兑换成功，获得\"+result.result.data.ChargeValue+\"金币！\";\r\n                                     cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',msg,null,null,2);   \r\n                                }else{\r\n                                     cc.director.getScene().getChildByName('Canvas').getChildByName('WindowLayer').getComponent('WindowLayer').openTips('1006',result.result.message,null,null,2); \r\n                                } \r\n                            } \r\n                       }); \r\n                 }); \r\n            }\r\n     }  \r\n}\r\n\r\n \r\n\r\n"]}