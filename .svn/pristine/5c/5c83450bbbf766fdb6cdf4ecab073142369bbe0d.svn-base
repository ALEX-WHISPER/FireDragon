{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["cc","Class","extends","Component","properties","game","default","type","Node","xPosMax","xPosMin","jumpHeight","jumpDuration","maxMoveSpeed","accel","jumpAudio","url","AudioClip","onLoad","startPos","node","position","jumpAction","setJumpAction","accLeft","accRight","xSpeed","update","dt","Math","abs","sign","x","onGameStart","runAction","onGamePaused","stopAction","onGameResume","y","onGameOver","stopAllActions","jumpUp","moveBy","p","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","playJumpSound","repeatForever","sequence","audioEngine","playEffect"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        game: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        xPosMax: 0,\r\n        xPosMin: 0,\r\n        jumpHeight: 0,\r\n        jumpDuration: 0,\r\n        maxMoveSpeed: 0,\r\n        accel: 0,\r\n\r\n        jumpAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n    },\r\n\r\n//#region Life cycle\r\n    onLoad: function() {\r\n        this.startPos = this.node.position;\r\n\r\n        // set jump action on load\r\n        this.jumpAction = this.setJumpAction();\r\n\r\n        // accle toggle\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\r\n        // cur x speed\r\n        this.xSpeed = 0;\r\n    },\r\n\r\n    // called every frame\r\n    update: function (dt) {\r\n        // update x speed\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.accel * dt;\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n\r\n        // limit the max horizontal move speed\r\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed ) {\r\n            // if speed reach limit, use max speed with current direction\r\n            this.xSpeed = this.maxMoveSpeed * Math.sign(this.xSpeed);\r\n        }\r\n\r\n        // update player's x pos\r\n        this.node.x += this.xSpeed * dt;\r\n\r\n        if (this.node.x <= this.xPosMin) {\r\n            this.node.x = this.xPosMin;\r\n            this.xSpeed = 0;\r\n        } else if (this.node.x >= this.xPosMax) {\r\n            this.node.x = this.xPosMax;\r\n            this.xSpeed = 0;\r\n        }\r\n    },\r\n//#endregion\r\n\r\n    onGameStart: function() {\r\n        this.node.runAction(this.jumpAction);\r\n    },\r\n\r\n    onGamePaused: function() {\r\n        this.accLeft = this.accRight = false;\r\n        this.xSpeed = 0;\r\n\r\n        this.node.stopAction(this.jumpAction);\r\n    },\r\n\r\n    onGameResume: function() {\r\n        this.node.y = this.startPos.y;\r\n        this.node.runAction(this.jumpAction);\r\n    },\r\n\r\n    onGameOver: function() {\r\n        this.accLeft = this.accRight = false;\r\n        this.xSpeed = 0;\r\n\r\n        this.node.stopAllActions();\r\n    },\r\n\r\n    setJumpAction: function () {\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n\r\n        // call back: play jump sound\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n\r\n        //  the player will jump up and down forever. And after falling back to ground, invoke the callback\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\r\n    },\r\n\r\n    playJumpSound: function () {\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n});\r\n"]}